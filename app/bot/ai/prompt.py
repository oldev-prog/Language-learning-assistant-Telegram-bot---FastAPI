json_schema = {
      "type": "json_schema",
      "json_schema": {
        "name": "word_explanation",
        "strict": True,
        "schema": {
          "type": "object",
          "properties": {
            "lang_code": {
              "type": "string",
              "description": "Двухбуквенный код языка слова",
            },
            "translation": {
              "type": "string",
              "description": "Перевод слова на противоположный язык: если слово на родном языке, перевод на изучаемый; если слово на изучаемом, перевод на родной язык.",
            },
            "explanation": {
              "type": "string",
              "description": "Объяснение смысла слова на родном языке пользователя",
            },
            "synonyms": {
              "type": "string",
              "description": "2–3 синонима на ИЗУЧАЕМОМ языке, через запятую, с краткой разницей",
            },
            "examples": {
                        "type": "string",
                        "description": "2 примера: фраза на изучаемом языке + перевод на родной",
                    },
                    "mnemonic": {
                        "type": "string",
                        "description": "Советы по запоминанию изучаемого слова"
                    }
          },
          "required": ["lang_code", "translation", "explanation", "synonyms", "examples", "mnemonic"],
          "additionalProperties": False,
        }
      }
    }

prompt_template = (
    "Ты работаешь с родным языком пользователя ({native_lang}) и изучаемым языком ({learning_lang}).\n\n"
    "Ты должен строго следовать JSON-схеме. Выводи только JSON-объект.\n"
    "Дано слово '{word}', родной язык пользователя: {native_lang}, изучаемый язык: {learning_lang}.\n"
    "1. Определи язык слова и вставь его код в 'lang_code'.\n"
    "2. Если слово на родном языке ({native_lang}), вставь в 'translation' перевод на изучаемый язык ({learning_lang}).\n"
    "3. Если слово на изучаемом языке ({learning_lang}), вставь в 'translation' перевод на родной язык ({native_lang}).\n"
    "Если слово одновременно является и глаголом и существительным, то дай оба перевода."
    "=== ОЧЕНЬ ВАЖНО ===\n"
    "Объяснение (explanation) должно:\n"
    "- быть только на родном языке пользователя ({native_lang})\n"
    "- описывать ЗНАЧЕНИЕ, оттенок, тональность, типичные ситуации употребления\n"
    "Синонимы (synonyms):\n"
    "- 2–3 слова ТОЛЬКО на изучаемом языке ({learning_lang})\n"
    "- кратко указать отличия (через тире)\n"
    "- без упоминаний родного языка\n\n"
    "Примеры (examples):\n"
    "- две короткие фразы ТОЛЬКО на изучаемом языке ({learning_lang})\n"
    "- после каждой фразы — перевод на родной язык ({native_lang})\n"
    "- формат: \"Фраза — Перевод; Фраза — Перевод\"\n\n"
    "Советы (mnemonic):\n"
    "- короткая ассоциация на родном языке ({native_lang})\n"
    "- не повторять перевод и не повторять объяснение\n\n"
    "Никакого текста вне JSON. Максимум 300 символов.")